!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ats-lib-ntwk-common"),require("axios")):"function"==typeof define&&define.amd?define("ats-lib-clickadu",["ats-lib-ntwk-common","axios"],e):"object"==typeof exports?exports["ats-lib-clickadu"]=e(require("ats-lib-ntwk-common"),require("axios")):t["ats-lib-clickadu"]=e(t["ats-lib-ntwk-common"],t.axios)}("undefined"!=typeof self?self:this,((t,e)=>(()=>{"use strict";var n={312:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_NOT_SET_ID_CAMPAIGN=e.RESPONSE_CODES=e.RU_CAPTCHA_KEY=e.RU_CAPTCHA_BASE_URL=void 0,e.RU_CAPTCHA_BASE_URL=process.env.RU_CAPTCHA_BASE_URL,e.RU_CAPTCHA_KEY=process.env.RU_CAPTCHA_KEY,e.RESPONSE_CODES={SUCCESS:200,INTERNAL_SERVER_ERROR:500,BAD_REQUEST:400,NOT_FOUND:404,NOT_MODIFIED:304},e.ERROR_NOT_SET_ID_CAMPAIGN="Не установлен ID кампании. Уставноите id кампании и попробуйте еще раз!"},399:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(604),s=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.base_url_api="https://ssp.clickadu.com/",i.base_url_admin="https://adv.clickadu.com/",i.name="clickadu",i}return i(e,t),e.prototype.createConnection=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,new u.default(this).open()];case 1:return[2,t.sent()]}}))}))},e}(n(338).Network);e.default=s},129:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(312),s=n(338),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getBalance=function(){var t;return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,null===(t=this.conn.api_conn)||void 0===t?void 0:t.get("api/v2/client/balance/").then((function(t){return t.data}))];case 1:return e=r.sent(),n=e&&e.result&&e.result.advertiser&&e.result.advertiser.balance?e.result.advertiser.balance:void 0,this.balance&&this.setBalance(new s.BalanceAccount(n)),[2,new s.ResponceApiNetwork({code:n?u.RESPONSE_CODES.SUCCESS:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:n?"OK":JSON.stringify(e),data:n})]}}))}))},e.prototype.fetch=function(){throw new Error("Method not implemented.")},e}(s.Account);e.default=c},892:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(312),s=n(797),c=n(338),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.create=function(t,e){var n,r,i,s,l;return void 0===e&&(e=new c.ScheduleCampaign),o(this,void 0,void 0,(function(){var o,p,d,f,h,v,g,y,_;return a(this,(function(a){switch(a.label){case 0:return o=t.name,p=t.template_id,d=t.bid,f=t.country,h=t.placements_data,v=t.target_url,[4,this.getFullDataCampaign(new c.IdCampaign(p.value))];case 1:return(g=a.sent())&&v.value?[4,this.clone(new c.IdCampaign(p.value))]:[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:"Not get data from network"})];case 2:return(y=a.sent())?(g.setId(String(y.value)).setName(String(o.value)).setRates([{amount:Math.ceil(100*Number(d.value))/100,countries:[String(null===(n=f.value)||void 0===n?void 0:n.toLowerCase())],isFutureRate:!1}]).setTargetUrl(v.value).setStatus(2).setTargetingCountry({list:[{id:String(f.value).toLowerCase(),title:String(f.value).toUpperCase(),code:String(f.value).toUpperCase()}],isExcluded:!1}).setTargetingConnection("all").setTargetingZone({list:null!==(i=null===(r=h.value)||void 0===r?void 0:r.list)&&void 0!==i?i:[],isExcluded:null!==(l=null===(s=h.value)||void 0===s?void 0:s.type)&&void 0!==l&&l}).setTargetingTimeTable({list:e.value,isExcluded:!1}).setFreqCapType("user"),[4,this.updateRaw(g)]):[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:"Error clone campaign in network"})];case 3:return(_=a.sent())&&_.result&&"success"===_.result?(this.setId(y).setName(o).setTemplateId(p).setBid(d).setCountry(f).setPlacementsData(h).setTargetUrl(v).setStatus(new c.StatusCampaign("moderation")),[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.SUCCESS,message:"OK",data:this})]):[3,4];case 4:return[4,this.removeUnit(y)];case 5:return a.sent(),[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:JSON.stringify(_)})]}}))}))},e.prototype.prepareStatus=function(t){var e=t.value,n=e.isArchived,r=e.status;return new c.StatusCampaign(n?"archived":[8,7,1].includes(r)?"stopped":3===r?"rejected":2===r?"moderation":"working")},e.prototype.updateSchedule=function(t){var e,n,r,i,s,l,p,d;return void 0===t&&(t=new c.ScheduleCampaign),o(this,void 0,void 0,(function(){var o,f,h,v,g,y,_;return a(this,(function(a){switch(a.label){case 0:return this.handlerErrNotIdCampaign(),[4,this.getFullDataCampaign(this.id)];case 1:return(o=a.sent())?(f=o.value,h=f.targeting,v=f.id,g=f.name,y=f.rates,console.log(h.country),o.setRates([{amount:null===(e=null==y?void 0:y[0])||void 0===e?void 0:e.amount,isFutureRate:null===(n=null==y?void 0:y[0])||void 0===n?void 0:n.isFutureRate,countries:null===(r=null==y?void 0:y[0])||void 0===r?void 0:r.countries.map((function(t){return t.id}))}]).setTargetingTimeTable({list:t.value,isExcluded:!1}).setTargetingZone({list:null!==(s=null===(i=h.zone)||void 0===i?void 0:i.list.map((function(t){return t.id})))&&void 0!==s?s:[],isExcluded:null!==(p=null===(l=h.zone)||void 0===l?void 0:l.isExcluded)&&void 0!==p&&p}).setFreqCapType("user").setTargetingConnection("all"),[4,this.updateRaw(o)]):[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:"Not get data from network"})];case 2:return(_=a.sent())&&_.result&&"success"===_.result?(this.setId(new c.IdCampaign(v)).setName(new c.NameCampaign(g)).setBid(new c.BidCampaign(null===(d=null==y?void 0:y[0])||void 0===d?void 0:d.amount)).setStatus(this.prepareStatus(o)).setSchedule(t),[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.SUCCESS,message:"OK",data:this})]):[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:JSON.stringify(_)})]}}))}))},e.prototype.fetch=function(){var t,e,n,r,i,s;return o(this,void 0,void 0,(function(){var o,l,p,d,f,h,v,g,y,_,m,w,b;return a(this,(function(a){switch(a.label){case 0:return this.handlerErrNotIdCampaign(),[4,this.getFullDataCampaign(this.id)];case 1:return(o=a.sent())?(l=function(t){var e;return null===(e=t.match(/\d+$/))||void 0===e?void 0:e[0]},p=o.value,d=p.id,f=p.name,h=p.targetUrl,p.status,v=p.targeting,g=p.rates,y=-1!==f.toLowerCase().indexOf("old ver"),_={"Content-Type":"application/json"},[4,null===(t=this.conn.admin_conn)||void 0===t?void 0:t.get("api/v1.0/client/targetings/all/",{headers:_}).then((function(t){var e,n,r;return null===(r=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.result)||void 0===n?void 0:n.browserVersion)||void 0===r?void 0:r.filter((function(t){return null==t?void 0:t.id.startsWith("chrome")})).map((function(t){return l(t.id)}))}))]):[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:"Not get data from network"})];case 2:return m=a.sent(),w=null==v?void 0:v.zone,b={name_ver:l(v.browserVersion.list[v.browserVersion.list.length-1].id),type:v.browserVersion.isExcluded?"last":"newORold"},this.setId(new c.IdCampaign(d)).setName(new c.NameCampaign(f)).setTargetUrl(new c.TargetUrlCampaign(h)).setCountry(new c.CountryCampaign(v.country.list[0].id)).setBid(new c.BidCampaign(null===(e=null==g?void 0:g[0])||void 0===e?void 0:e.amount)).setPlacementsData(new c.PlacementCampaign({list:null!==(r=null===(n=null==w?void 0:w.list)||void 0===n?void 0:n.map((function(t){return null==t?void 0:t.id})))&&void 0!==r?r:[],type:null!==(i=null==w?void 0:w.isExcluded)&&void 0!==i&&i})).setStatus(this.prepareStatus(o)).setSchedule(new c.ScheduleCampaign(v.timeTable.list)).setBrowserVersion(new c.BrowserVersionCampaign(y?null:"last"===b.type?null===(s=m.filter((function(t){return Number(t)>Number(b.name_ver)})))||void 0===s?void 0:s[0]:b.name_ver)),[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.SUCCESS,message:"OK",data:this})]}}))}))},e.prototype.updateRaw=function(t){var e;return o(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return n="api/v2/campaigns/".concat(t.value.id,"/"),[4,null===(e=this.conn.api_conn)||void 0===e?void 0:e.put("".concat(n),t.value,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data}))];case 1:return[2,r.sent()]}}))}))},e.prototype.getFullDataCampaign=function(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return e="api/v1.0/client/campaigns/".concat(t.value,"/"),n=null,this.conn.admin_conn?[4,this.conn.admin_conn.get(e).then((function(t){var e,n=t.data.result;return new s.default({id:n.id,name:n.name,rates:n.rates,targetUrl:n.targetUrl,frequency:n.frequency,capping:n.capping,isArchived:n.isArchived,impFrequency:n.impFrequency,impCapping:n.impCapping,freqCapType:n.freqCapType,rateModel:n.rateModel,direction:n.direction,status:n.status,evenlyLimitsUsage:n.evenlyLimitsUsage,trafficQuality:n.trafficQuality,autoLinkNewZones:null!==(e=n.autoLinkNewZones)&&void 0!==e&&e,isAdblockBuy:n.isAdblockBuy,trafficBoost:n.trafficBoost,startedAt:n.startedAt,feed:n.feed,isDSP:n.isDSP,trafficVertical:n.trafficVertical,targeting:n.targeting})}))]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return[2,n]}}))}))},e.prototype.clone=function(t){var e,n;return o(this,void 0,void 0,(function(){var r,i,o,u,s;return a(this,(function(a){switch(a.label){case 0:return r="api/v1.0/client/campaigns/".concat(t.value,"/clone/"),i="v1.0/api/client/campaigns/?limit=1&page=1&status=draft",o={name:"1"},[4,null===(e=this.conn.admin_conn)||void 0===e?void 0:e.post("".concat(r),o,{headers:{"Content-Type":"application/json"}}).then((function(t){return t.data}))];case 1:return(u=a.sent())&&u.result&&"success"===u.result?[4,null===(n=this.conn.api_conn)||void 0===n?void 0:n.get("".concat(i)).then((function(t){return t.data}))]:[3,3];case 2:return[2,!(!(s=a.sent()).length||!(null==s?void 0:s[0].id))&&new c.IdCampaign(null==s?void 0:s[0].id)];case 3:return[2,!1]}}))}))},e.prototype.getStatus=function(){var t;return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return this.handlerErrNotIdCampaign(),e="api/v2/campaigns/"+this.id.value+"/",[4,null===(t=this.conn.api_conn)||void 0===t?void 0:t.get(e).then((function(t){return t.data}))];case 1:return n=r.sent(),[2,this.prepareStatus(new s.default(n))]}}))}))},e.prototype.updatePlacements=function(t){var e,n,r;return o(this,void 0,void 0,(function(){var i,o,s,l,p,d,f;return a(this,(function(a){switch(a.label){case 0:return this.handlerErrNotIdCampaign(),i=t.value,o=null==i?void 0:i.list,s=null==i?void 0:i.type,l=s?"blocked":"targeted",p="v1.0/api/client/campaigns/".concat(null===(e=this.id)||void 0===e?void 0:e.value,"/").concat(l,"/zone/"),d={"Content-Type":"application/json"},[4,null===(n=this.conn.api_conn)||void 0===n?void 0:n.put(p,JSON.stringify(o),{headers:d},(function(t){return 400===t||200===t})).then((function(t){return t.data}))];case 1:return f=a.sent(),null===(r=f.resp)||void 0===r||r.error,f.id?(this.setPlacementsData(new c.PlacementCampaign({list:null!=o?o:[],type:null!=s&&s})),[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.SUCCESS,message:"OK",data:this})]):304===f.status?[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.NOT_MODIFIED,message:JSON.stringify(f)})]:[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:JSON.stringify(f)})]}}))}))},e.prototype.remove=function(){var t;return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.handlerErrNotIdCampaign(),(null===(t=this.status)||void 0===t?void 0:t.value)?[3,2]:(e=this,[4,this.getStatus()]);case 1:e.status=n.sent(),n.label=2;case 2:return"archived"===this.status.value?[2,new c.ResponceApiNetwork({code:u.RESPONSE_CODES.BAD_REQUEST,message:"Campaign already removed"})]:"moderation"===this.status.value?[3,4]:[4,this.stop()];case 3:return n.sent(),[3,6];case 4:return[4,this.cancelModeration()];case 5:n.sent(),n.label=6;case 6:return[4,this.removeUnit(this.id)];case 7:return[2,n.sent()]}}))}))},e.prototype.removeUnit=function(t){var e;return o(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:return n={campaignIds:[t.value]},r={"Content-Type":"application/json"},[4,null===(e=this.conn.admin_conn)||void 0===e?void 0:e.put("api/v1.0/client/campaigns/to_archive/",n,{headers:r}).then((function(t){return t.data}))];case 1:return i=a.sent(),o=i&&i.result&&"success"===i.result,[2,new c.ResponceApiNetwork({code:o?u.RESPONSE_CODES.SUCCESS:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:o?"OK":JSON.stringify(i)})]}}))}))},e.prototype.start=function(){var t,e;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n="api/v2/campaign/".concat(null===(t=this.id)||void 0===t?void 0:t.value,"/change_status/start/"),[4,null===(e=this.conn.api_conn)||void 0===e?void 0:e.post(n,{}).then((function(t){return t.data}))];case 1:return r=o.sent(),i=r&&r.result&&"success"===r.result||r.error&&-1!==r.error.message.indexOf("rong status for advertiser"),[2,new c.ResponceApiNetwork({code:i?u.RESPONSE_CODES.SUCCESS:u.RESPONSE_CODES.INTERNAL_SERVER_ERROR,message:i?"OK":JSON.stringify(r)})]}}))}))},e.prototype.stop=function(){var t,e,n;return o(this,void 0,void 0,(function(){var r,i,o;return a(this,(function(a){switch(a.label){case 0:return this.handlerErrNotIdCampaign(),r="api/v2/campaign/".concat(null===(t=this.id)||void 0===t?void 0:t.value,"/change_status/stop/"),[4,null===(e=this.conn.api_conn)||void 0===e?void 0:e.post(r,{}).then((function(t){return t.data}))];case 1:return i=a.sent(),o=i&&i.result&&"success"===i.result||-1!==(null===(n=i.error.message)||void 0===n?void 0:n.indexOf("Got: stop")),[2,new c.ResponceApiNetwork({code:o?u.RESPONSE_CODES.SUCCESS:u.RESPONSE_CODES.BAD_REQUEST,message:o?"OK":JSON.stringify(i)})]}}))}))},e.prototype.cancelModeration=function(){var t,e;return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n={campaignIds:[null===(t=this.id)||void 0===t?void 0:t.value]},r={"Content-Type":"application/json"},[4,null===(e=this.conn.admin_conn)||void 0===e?void 0:e.put("api/v1.0/client/campaigns/cancel/",n,{headers:r}).then((function(t){return t.data}))];case 1:return[2,(i=o.sent())&&i.result&&"success"===i.result]}}))}))},e}(c.Campaign);e.default=l},604:function(t,e,n){var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(892),s=n(300),c=n(127),l=n(312),p=n(129),d=n(338),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.solveReCapathca=function(t,n){return o(e,void 0,void 0,(function(){var e,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,(e=new c.default(l.RU_CAPTCHA_KEY)).sendReCaptcha(t,n)];case 1:return r=o.sent(),[4,e.result(r)];case 2:return i=o.sent(),console.log("result_captcha",r,i),[2,i]}}))}))},e}return i(e,t),e.prototype.auth=function(){var t,e,n;return o(this,void 0,void 0,(function(){var r,i,o;return a(this,(function(a){switch(a.label){case 0:return r={gRecaptchaResponse:null,password:null===(t=this.network)||void 0===t?void 0:t.password,type:"ROLE_ADVERTISER",username:null===(e=this.network)||void 0===e?void 0:e.login},i="".concat(null===(n=this.network)||void 0===n?void 0:n.base_url_admin).concat("api/v1.0/login_check"),o={"Content-Type":"application/json"},[4,s.default.post(i,r,{validateStatus:function(t){return[200,401,302,405].includes(t)},headers:o}).then((function(t){return t.data}))];case 1:return[2,a.sent().result.accessToken]}}))}))},e.prototype.open=function(){var t,e,n;return o(this,void 0,void 0,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return this.api_conn=new d.HttpInstance({baseUrl:null===(t=this.network)||void 0===t?void 0:t.base_url_api,headers:{Authorization:"".concat(null===(e=this.network)||void 0===e?void 0:e.api_key)}}),[4,this.auth()];case 1:return r=i.sent(),this.admin_conn=new d.HttpInstance({baseUrl:null===(n=this.network)||void 0===n?void 0:n.base_url_admin,headers:{Authorization:"Bearer ".concat(r)}}),this.keepAlive(),[2,this]}}))}))},e.prototype.getCampaign=function(){return new u.default(this)},e.prototype.getAccount=function(){return new p.default(this)},e.prototype.keepAlive=function(){var t,e=this;null===(t=this.admin_conn)||void 0===t||t.keepAlive((function(t){return o(e,void 0,void 0,(function(){var e=this;return a(this,(function(n){switch(n.label){case 0:return 401!==t.status||!t.config||t.config.__isRetryRequest?[3,2]:[4,this.open().then((function(n){return o(e,void 0,void 0,(function(){var e;return a(this,(function(n){return t.config.__isRetryRequest=!0,[2,null===(e=d.HttpInstance.request)||void 0===e?void 0:e.call(d.HttpInstance,t.config)]}))}))}))];case 1:return[2,n.sent()];case 2:return[2,t]}}))}))}))},e}(d.NetworkConnection);e.default=f},797:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.setTargetUrl=function(t){return this._value.targetUrl=t,this},t.prototype.setId=function(t){return this._value.id=t,this},t.prototype.setName=function(t){return this._value.name=t,this},t.prototype.setRates=function(t){return this._value.rates=t,this},t.prototype.setStatus=function(t){return this._value.status=t,this},t.prototype.setTargetingCountry=function(t){return this._value.targeting.country=t,this},t.prototype.setTargetingTimeTable=function(t){return this._value.targeting.timeTable=t,this},t.prototype.setTargetingZone=function(t){return this._value.targeting.zone=t,this},t.prototype.setTargetingConnection=function(t){return this._value.targeting.connection=t,this},t.prototype.setFreqCapType=function(t){return this._value.freqCapType=t,this},t}();e.default=n},127:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(300),a=n(312),u=function(){function t(t){this.min_await_sec=10,this.base_url=a.RU_CAPTCHA_BASE_URL,this.api_key=t}return t.prototype.sendReCaptcha=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return n=this.base_url+"in.php",r="key="+this.api_key+"&method=userrecaptcha&googlekey="+t+"&pageurl="+e,console.log(1111,n,r),[4,o.default.post(n,r)];case 1:return[2,i.sent().data.split("|")[1]]}}))}))},t.prototype.result=function(t){return r(this,void 0,void 0,(function(){var e,n,a,u,s=this;return i(this,(function(c){switch(c.label){case 0:e=1e3*this.min_await_sec,n=this.base_url+"res.php",a="key="+this.api_key+"&action=get&id="+t,console.log("id_resolve_recapcha",t),u="CAPCHA_NOT_READY",c.label=1;case 1:return"CAPCHA_NOT_READY"!==u?[3,3]:[4,new Promise((function(t,u){setTimeout((function(){return r(s,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return e=t,[4,o.default.get(n+"?"+a).then((function(t){return t.data}))];case 1:return e.apply(void 0,[r.sent()]),[2]}}))}))}),e)}))];case 2:return u=c.sent(),[3,1];case 3:return[2,u.split("|")[1]]}}))}))},t}();e.default=u},338:e=>{e.exports=t},300:t=>{t.exports=e}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t].call(o.exports,o,o.exports,i),o.exports}var o={};return(()=>{var t=o;Object.defineProperty(t,"__esModule",{value:!0}),t.Account=t.ScheduleCampaign=t.PlacementCampaign=t.Campaign=t.IdCampaign=t.BidCampaign=t.CountryCampaign=t.NameCampaign=t.TemplateIdCampaign=t.TargetUrlCampaign=t.BrowserVersionCampaign=void 0;var e=i(399),n=i(129);t.Account=n.default;var r=i(892);t.Campaign=r.default;var a=i(338);Object.defineProperty(t,"TemplateIdCampaign",{enumerable:!0,get:function(){return a.TemplateIdCampaign}}),Object.defineProperty(t,"TargetUrlCampaign",{enumerable:!0,get:function(){return a.TargetUrlCampaign}}),Object.defineProperty(t,"ScheduleCampaign",{enumerable:!0,get:function(){return a.ScheduleCampaign}}),Object.defineProperty(t,"PlacementCampaign",{enumerable:!0,get:function(){return a.PlacementCampaign}}),Object.defineProperty(t,"NameCampaign",{enumerable:!0,get:function(){return a.NameCampaign}}),Object.defineProperty(t,"IdCampaign",{enumerable:!0,get:function(){return a.IdCampaign}}),Object.defineProperty(t,"CountryCampaign",{enumerable:!0,get:function(){return a.CountryCampaign}}),Object.defineProperty(t,"BrowserVersionCampaign",{enumerable:!0,get:function(){return a.BrowserVersionCampaign}}),Object.defineProperty(t,"BidCampaign",{enumerable:!0,get:function(){return a.BidCampaign}}),t.default=e.default})(),o})()));